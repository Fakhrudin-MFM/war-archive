{
  "namespace": "war-archive",
  "globals": {
    "moduleTitles": {
      "registry": {
        "description": "Реестр документов ВОВ",
        "order": 10,
        "skipModules": true
      },
      "portal": "Портал поиска документов"
    },
    "plugins":{
      "watermark": {
        "module": "applications/war-archive/lib/watermark-overlay/preProcessor",
        "initMethod": "init",
        "initLevel": 0,
        "options": {
            "text": "Военный архив",
            "font": {
              "family": "Ubuntu Mono",
              "name": "UbuntuMono-Regular",
              "path": "applications/war-archive/fonts/UbuntuMono-R.ttf"
            },
            "fontSize": 72,
            "fontColor": "rgba(255,255,255,0.5)",
            "pattern" : true,
            "ratio" : 50
        }
      },
      "imageStorage": {
        "options": {
          "preProcessors": "ion://watermark"
        }
      }
    }
  },
  "deployer": "built-in",
  "modules": {
    "registry": {
      "globals": {
        "listSearchOptions": {},
        "eagerLoading": {
          "*": {
            "listsCalledRedandSovietArmy@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "bookAccParticipGreatPatrioticWar@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },

            "bookDemobilizSovietArmy@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },

            "bookRecParticSecondWorldWar@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },

            "bookRecSearchFormerServicemen@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },

            "booksReceivedDeliveredNotices@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },

            "documentsMilitaryPersonnelHosps@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },

            "listDeadSoldier@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "listsDeadMissingMilitary@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "listsMobilizedIndustry@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "listsRepatriatedCitizens@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "listsServicemenMissing@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "listsSummonedConvicted@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
            "basicArchDoc@war-archive": {
              "item": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ],
              "list": [
                "archLinkDoc.linkInventory.fond.codeFond",
                "archLinkDoc.linkInventory.numInventory"
              ]
            },
			"objectScanFile@war-archive": {
              "item": [
                "linkCase.linkInventory.fond.codeFond",
                "linkCase.linkInventory.numInventory"
              ],
              "list": [
                "linkCase.linkInventory.fond.codeFond",
                "linkCase.linkInventory.numInventory"
              ]
            },
            "catalogFond@war-archive": {
              "item": [
                "inventory.archCase.numCase"
              ]
            },
            "case@war-archive": {
              "create": [
                "linkInventory.fond.codeFond",
                "linkInventory.numInventory"
              ],
              "item": [
                "linkInventory.fond.codeFond",
                "linkInventory.numInventory"
              ],
              "list": [
                "linkInventory.fond.codeFond",
                "linkInventory.numInventory"
              ]
            }
          }
        },
        "storage": {
          "objectScanFile@war-archive": {
            "scanFile": "/${class}/wow_${attr}/${dddd}/"
          }
        },
        "defaultPath": "",
        "inlineForm": true,
        "navigation": {
          "namespaces": {
            "war-archive": "Реестр документов ВОВ ХК"
          },
          "menus": {
            "left": [
              "war-archive@tabBaseArchDoc",
              "war-archive@tabsList",
              "war-archive@catalog",
			        "war-archive@workPlaceOperator"
            ]
          }
        },
        "templates": [],
        "di": {
          "dataRepo": {
            "module": "core/impl/datarepository/ionDataRepository",
            "options": {
              "dataSource": "ion://Db",
              "metaRepository": "ion://metaRepo",
              "fileStorage": "ion://fileStorage",
              "imageStorage": "ion://imageStorage",
              "log": "ion://sysLog",
              "keyProvider": {
                "name": "keyProvider",
                "module": "core/impl/meta/keyProvider",
                "options": {
                  "metaRepo": "ion://metaRepo"
                }
              },
              "maxEagerDepth": 4
            }
          }
        }
      }
    },
    "ionadmin": {
      "globals": {
        "defaultPath": "ionadmin",
        "securityParams": {
          "resourceTypes": {
            "*": {
              "title": "Общие"
            },
            "n:::": {
              "title": "Навигация"
            },
            "c:::": {
              "title": "Классы"
            },
            "ionadmin:::": {
              "title": "Модуль администрирования"
            }
          }
        }
      }
    },
    "portal": {
      "import" : {
        "src": "applications/war-archive/portal",
        "namespace": "war-archive"
      },
      "globals": {
        "portalName": "vov",
        "default": "index",
        "theme": "war-archive/themes/portal",
        "templates":[
          "applications/war-archive/themes/portal/templates"
        ],
        "statics":{
          "vov": "applications/war-archive/themes/portal/static",
          "vendor": "applications/war-archive/themes/portal/static/node_modules"
        },
        "pageTemplates": {
          "navigation": {
            "index": "pages/index",
            "result": "pages/result",
            "detail": "pages/detail"
          }
        },
        "di":{
          "provider":{
            "options": {
              "adapters": {
                "docs": {
                  "name": "archDocAdapter",
                  "module":"applications/war-archive/portal/adapter/DocSearchAdapter",
                  "options": {
                    "publicAttrs": [
                      "archLinkDoc", "sheet", "districtArchDoc.nameDistrict", "surname", "firstname", "secondname", "dateBirth", "placeBirth", "education", "militNumTick",
                      "partyMembership", "militaryUnit", "whenSentPart", "teamPartSent", "placeWorkBeforeConscription", "placeWork", "whenceMobilized", "whoAwarded", "whenAward",
                      "seriaParticWar", "numParticWar", "dateParticWar", "distrMilUnit", "dateRegistration", "whenNoticeGiven", "whomNoticeGiven",
                      "whereMobilize", "dateSummon", "placeSummon", "militaryRank.militaryRankCat", "placeBurial", "dateLeaving", "whenSendUnit", "whatUnitSen",
                      "reasonLeaving", "constitution", "timeCaptivity", "locatCaptivity", "locatWork", "note", "storageForFile", "storageForFileBack", "scanFile", "urlScanFile",
                      "dateMobilize"
                    ],
                    "notPublicAttrs": ["archLinkDoc", "sheet", "surname", "firstname", "secondname"],
                    "dataRepo": "ion://dataRepo",
                    "className": "basicArchDoc@war-archive"
                  }
                },
                "rank": {
                  "name": "rank",
                  "module":"modules/portal/lib/impl/adapter/ClassAdapter",
                  "options": {
                    "dataRepo": "ion://dataRepo",
                    "className": "catalogMilitaryRank@war-archive",
                    "map": {}
                  }
                },
                "district": {
                  "name": "district",
                  "module":"modules/portal/lib/impl/adapter/ClassAdapter",
                  "options": {
                    "dataRepo": "ion://dataRepo",
                    "className": "catalogDistrict@war-archive",
                    "map": {}
                  }
                }
              }
            }
          },
          "docsApi":{
            "module": "applications/war-archive/portal/lib/controllers/docsApi",
            "initMethod": "init",
            "initLevel": 0,
            "options": {
              "module": "ion://module",
              "sysLog": "ion://sysLog"
            }
          }
        }
      }
    }
  }
}
